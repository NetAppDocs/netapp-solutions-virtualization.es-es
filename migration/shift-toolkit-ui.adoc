---
sidebar: sidebar 
permalink: migration/shift-toolkit-ui.html 
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox 
summary:  
---
= Configurar el kit de herramientas NetApp Shift
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Configure Shift Toolkit para automatizar la migración o conversión de máquinas virtuales. Este proceso incluye agregar sitios de origen y destino, configurar el almacenamiento, agrupar las máquinas virtuales en grupos de recursos, crear planes de migración y programar migraciones.



== Kit de herramientas Run Shift

* Utilizando el navegador, acceda a la interfaz de usuario del kit de herramientas Shift introduciendo el `http://<IP address specified during installation>:3001`
+

NOTE: Utilice Google Chrome o Internet Explorer para una mejor experiencia.

* Acceda a la interfaz de usuario con las credenciales predeterminadas que se muestran a continuación: Nombre de usuario: admin Contraseña: admin
+
image::shift-toolkit-050.png[Diagrama de la pantalla de inicio de sesión de NetApp Shift Toolkit]

+

NOTE: Los administradores deben cambiar sus credenciales durante el inicio de sesión inicial.

+

NOTE: Tras el cambio de contraseña obligatorio, las credenciales de administrador también se pueden cambiar mediante la opción "Cambiar contraseña" después de iniciar sesión en la interfaz gráfica de usuario (GUI).

+
image::shift-toolkit-051.png[Diagrama de la pantalla de cambio de contraseña de NetApp Shift Toolkit]

+
Una vez hecho esto, acepta el acuerdo legal de licencia de usuario final (EULA) haciendo clic en “Aceptar y continuar”.

+
image::shift-toolkit-052.png[Captura de pantalla del Acuerdo de Licencia de Usuario Final (EULA) de NetApp]





== Configuración del kit de herramientas Shift

Una vez configurados correctamente el almacenamiento y la conectividad con los hipervisores de origen y destino, comience a configurar el kit de herramientas Shift para automatizar la migración o conversión de las máquinas virtuales al formato apropiado, aprovechando la funcionalidad FlexClone .



=== Agregar sitios

El primer paso es descubrir y agregar los detalles del hipervisor de origen y luego del hipervisor de destino (tanto los hipervisores como el almacenamiento) al kit de herramientas Shift.  Abra el kit de herramientas de Shift en un navegador compatible, utilice el nombre de usuario y la contraseña predeterminados y haga clic en “Agregar sitios”.

image::shift-toolkit-053.png[Diálogo del kit de herramientas de Shift: Agregar sitios]


NOTE: También se pueden agregar sitios usando la opción Descubrir.

Agregue las siguientes plataformas:



==== Fuente

* Detalles del sitio de origen
+
** Nombre del sitio: proporcione un nombre para el sitio
** Hipervisor: seleccione VMware o Hyper-V como origen.
** Ubicación del sitio: seleccione la opción predeterminada
** Conector – Seleccione la selección predeterminada




Una vez rellenado, haga clic en Continuar.

image::shift-toolkit-054.png[Diálogo del kit de herramientas Shift: Agregar nuevo sitio]

* Si la selección es VMware, introduzca los detalles del vCenter de origen.
+
** Punto final: ingrese la dirección IP o el FQDN del servidor vCenter
** Nombre de usuario: nombre de usuario para acceder al vCenter (en formato UPN: nombredeusuario@dominio.com)
** Contraseña de vCenter: contraseña para acceder a vCenter para realizar el inventario de los recursos.
** Huella digital SSL de vCenter (opcional)


* Si la selección es Hyper-V, introduzca los detalles de Hyper-V de origen.
+
** Punto de conexión: introduzca la dirección IP o el FQDN de los hosts independientes o del punto de conexión del clúster de conmutación por error.
** Nombre de usuario de Hyper-V: nombre de usuario para acceder a Hyper-V (en formato de inicio de sesión de nivel inferior (dominio\nombre de usuario) o UPN).
** Contraseña de Hyper-V: contraseña para acceder a Hyper-V y realizar el inventario de los recursos.
+
 Select “Accept Self signed certificate” and click Continue.


* Credenciales del sistema de almacenamiento ONTAP


image::shift-toolkit-055.png[Diálogo del kit de herramientas Shift: Agregar nuevo sitio]

Una vez agregado, el kit de herramientas Shift realizará un descubrimiento automático y mostrará las máquinas virtuales junto con la información de metadatos relevante. Shift Toolkit detectará automáticamente las redes y VLAN utilizadas por las máquinas virtuales y las completará.


NOTE: Si se realizan modificaciones en el sitio de origen, asegúrese de ejecutar la detección para obtener la información más reciente. Esto se puede hacer haciendo clic en los 3 puntos que aparecen junto al nombre del sitio y luego en “Descubrir sitio”.


NOTE: El inventario de VM se actualiza automáticamente cada 24 horas.

image::shift-toolkit-056.png[Diálogo del Shift Toolkit Agregar nuevo sitio para descubrir un sitio]

Para ver los datos de detección de un hipervisor de origen específico, vaya al panel de control y haga clic en "Ver lista de máquinas virtuales" junto al nombre del sitio correspondiente. La página mostrará el inventario de VM junto con los atributos de la VM.

image::shift-toolkit-057.png[El diálogo del kit de herramientas Shift descubrió sitios]

El siguiente paso es agregar el hipervisor de destino. Para agregar, haga clic en “Agregar nuevo sitio” y seleccione “Destino”.



==== Destino

image::shift-toolkit-058.png[Diálogo del kit de herramientas Shift Toolkit Agregar sitio para el destino]

* Detalles del sitio de destino
+
** Nombre del sitio: proporcione un nombre para el sitio
** Hipervisor: seleccione la plataforma de destino adecuada entre las siguientes opciones:
+
*** VMware
*** Hyper-V
*** OpenShift
*** OLVM
*** KVM (solo conversión)


** Ubicación del sitio: seleccione la opción predeterminada
** Conector – Seleccione la selección predeterminada




Una vez rellenado, haga clic en Continuar.

image::shift-toolkit-059.png[Diálogo del kit de herramientas Shift Toolkit Agregar sitio para los detalles del destino]

Según la selección del hipervisor, complete los detalles necesarios.

* Detalles del hipervisor de destino
+
** Dirección IP o FQDN del punto final del administrador del hipervisor correspondiente
** Nombre de usuario: nombre de usuario para acceder (en formato UPN: usuario@dominio.com o dominio\administrador) Contraseña: contraseña para acceder y realizar el inventario de los recursos.




Seleccione “Aceptar certificado autofirmado”.

* Una vez hecho esto, haz clic en “Crear sitio”.



NOTE: El sistema de almacenamiento de origen y destino debe ser el mismo, ya que la conversión del formato del disco se realiza a nivel de volumen y dentro del mismo volumen.

image::shift-toolkit-060.png[Diálogo del kit de herramientas Shift Toolkit Agregar sitio para los detalles del destino]

El siguiente paso es agrupar las máquinas virtuales necesarias en sus grupos de migración como grupos de recursos.



=== Agrupaciones de recursos

Una vez agregadas las plataformas, agrupe las máquinas virtuales que desea migrar o convertir en grupos de recursos.  Los grupos de recursos del kit de herramientas Shift le permiten agrupar conjuntos de máquinas virtuales dependientes en grupos lógicos que contienen sus órdenes de arranque y retrasos de arranque.


NOTE: Asegúrese de que los Qtrees estén aprovisionados (como se menciona en la sección de requisitos previos) antes de crear los grupos de recursos.

Para comenzar a crear grupos de recursos, haga clic en el elemento de menú “Crear nuevo grupo de recursos”.

. Para acceder a los grupos de recursos, haga clic en “Crear nuevo grupo de recursos”.
+
image::shift-toolkit-061.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]

. En el “Nuevo grupo de recursos”, seleccione el sitio de origen en el menú desplegable y haga clic en “Crear”.
. Proporcione detalles del grupo de recursos y seleccione el flujo de trabajo.  El flujo de trabajo ofrece dos opciones
+
.. Migración basada en clones: realiza la migración de extremo a extremo de la máquina virtual desde el hipervisor de origen al hipervisor de destino.
.. Conversión basada en clones: realiza la conversión del formato de disco al tipo de hipervisor seleccionado.
+
image::shift-toolkit-062.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]



. Haz clic en “Continuar”
. Seleccione las máquinas virtuales adecuadas mediante la opción de búsqueda. La opción de filtro predeterminada es “Almacén de datos”.
+

NOTE: Mueva las máquinas virtuales para convertirlas o migrarlas a un almacén de datos designado en una SVM ONTAP recién creada antes de la conversión. Esto ayuda a aislar el almacén de datos NFS de producción, y el almacén de datos designado se puede usar para preparar las máquinas virtuales.

+

NOTE: Para el entorno OpenShift, los VMDK deben reubicarse en sus volúmenes correspondientes para replicar la estructura PVC (Persistent Volume Claim) utilizando el controlador de almacenamiento NAS de ONTAP . En futuras versiones, se incorporarán mejoras adicionales para aprovechar el controlador de economía de ONTAP NAS.

+
image::shift-toolkit-063.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]

+

NOTE: El menú desplegable del almacén de datos en este contexto solo mostrará los almacenes de datos NFSv3. Los almacenes de datos NFSv4 no se mostrarán.

+
image::shift-toolkit-064.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]

. Actualice los detalles de la migración seleccionando “Sitio de destino”, “Entrada de hipervisor de destino” y la asignación de Datastore a Qtree o clase de almacenamiento.
+
image::shift-toolkit-065.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]

+

NOTE: Asegúrese de que la ruta de destino (donde se almacenan las máquinas virtuales convertidas) esté configurada como un qtree al convertir las máquinas virtuales. Establezca la ruta de destino al qtree apropiado.

+

NOTE: Se pueden crear y utilizar varios qtrees para almacenar los discos de VM convertidos según corresponda.

+

NOTE: Las máquinas virtuales pueden ejecutarse en almacenes de datos distribuidos, y Shit toolkit las detectará automáticamente; sin embargo, se debe asignar un qtree para cada volumen.

+
Capacidad para migrar máquinas virtuales con VMDK distribuidos en varios volúmenes. La interfaz de usuario del kit de herramientas Shift selecciona automáticamente todos los volúmenes distribuidos que forman parte de una o varias máquinas virtuales seleccionadas para ese RG específico.  Esto mostrará todos los volúmenes en la página RG donde realizamos la asignación de datastore a qtree.

+
image::shift-toolkit-066.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]

. Seleccione el orden de arranque y el retraso de arranque (segundos) para todas las máquinas virtuales seleccionadas. Establezca el orden de la secuencia de encendido seleccionando cada máquina virtual y configurando la prioridad para ella. 3 es el valor predeterminado para todas las máquinas virtuales. Las opciones son las siguientes: 1 – La primera máquina virtual en encenderse; 3 – Predeterminado; 5 – La última máquina virtual en encenderse.
+
image::shift-toolkit-067.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]

. Haz clic en “Crear grupo de recursos”.
+
image::shift-toolkit-068.png[Diálogo de la interfaz de usuario Crear nuevo grupo de recursos]

+

NOTE: En caso de necesitar modificar el grupo de recursos para agregar o eliminar máquinas virtuales, utilice esta opción junto al nombre del grupo de recursos y seleccione “Editar grupo de recursos”.





=== Planos

Para migrar o convertir máquinas virtuales, es necesario un plan. Seleccione las plataformas de hipervisor de origen y destino del menú desplegable y elija los grupos de recursos que se incluirán en este plan, junto con la agrupación de cómo se deben encender las aplicaciones (es decir, controladores de dominio, luego nivel 1, luego nivel 2, etc.). A menudo, estos también se denominan planes de migración. Para definir el plano, vaya a la pestaña “Planos” y haga clic en “Crear nuevo plano”.

Para comenzar a crear un plano, haga clic en “Crear nuevo plano”.

. Acceda a los planos y haga clic en “Crear nuevo plano”.
+
image::shift-toolkit-069.png[Diálogo de la interfaz de usuario de Access Blueprints]

. En el “Nuevo plano”, asigne un nombre al plan y agregue las asignaciones de host necesarias seleccionando Sitio de origen > vCenter asociado, Sitio de destino y el hipervisor asociado.
. Una vez realizadas las asignaciones, seleccione la asignación de clúster y host. En el ejemplo siguiente, Hyper-V se muestra como destino.  La opción de hipervisor que se muestre variará según el sitio de origen seleccionado.
+
image::shift-toolkit-070.png[Diálogo de la interfaz de usuario Crear nuevos planos]

. Seleccione Detalles del grupo de recursos y haga clic en “Continuar”.
+
image::shift-toolkit-071.png[Diálogo de la interfaz de usuario Crear nuevos planos]

. Establecer orden de ejecución para el grupo de recursos.  Esta opción permite seleccionar la secuencia de operaciones cuando existen múltiples grupos de recursos.
. Tras completar los pasos anteriores, seleccione Mapeo de red y asígnelo al mapa de red correspondiente.  Asegúrese de que los conmutadores virtuales, los perfiles de red o los operadores ya estén aprovisionados en el hipervisor de destino.
+
image::shift-toolkit-072.png[Diálogo de la interfaz de usuario Crear nuevos planos]

+

NOTE: Para la migración de prueba, la opción predeterminada es “No configurar la red” y el kit de herramientas Shift no realiza la asignación de direcciones IP. Una vez convertido el disco y comprada la máquina virtual en el hipervisor correspondiente, asigne manualmente los conmutadores de red burbuja para evitar cualquier colisión con la red de producción.

+
image::shift-toolkit-073.png[Diálogo de la interfaz de usuario Crear nuevos planos]

. Según la selección de máquinas virtuales, se seleccionarán automáticamente las asignaciones de almacenamiento.
+

NOTE: Asegúrese de que el qtree esté aprovisionado previamente y que se hayan asignado los permisos necesarios para que la máquina virtual pueda crearse y encenderse.  NOTA: En el caso de OpenShift, los PVC se crean utilizando Trident CSI y no es necesario crear previamente los qtrees.

. En los detalles de la máquina virtual, proporcione la cuenta de servicio y las credenciales de usuario válidas para cada tipo de sistema operativo.  Esto se utiliza para conectarse a la máquina virtual para crear y ejecutar ciertos scripts que son necesarios para eliminar las herramientas de VMware y realizar copias de seguridad de los detalles de configuración de IP.
+
.. Para los sistemas operativos basados en Windows, se recomienda utilizar un usuario con privilegios de administrador local. También se pueden usar las credenciales de dominio; sin embargo, asegúrese de que exista un perfil de usuario en la máquina virtual antes de la conversión, de lo contrario, las credenciales de dominio no funcionarán, ya que buscará la autenticación de dominio cuando no haya ninguna red conectada.
.. En el caso de máquinas virtuales invitadas basadas en distribuciones de Linux, proporcione un usuario que pueda ejecutar comandos sudo sin contraseña, lo que significa que el usuario debe formar parte de la lista sudoers o agregarse como un nuevo archivo de configuración a la carpeta /etc/sudoers.d/.
+
image::shift-toolkit-074.png[Diálogo de la interfaz de usuario Crear nuevos planos]

+
En la última versión, Shift Toolkit introdujo una mayor flexibilidad en la preparación de máquinas virtuales.  Por defecto, el kit de herramientas automatiza la preparación de la máquina virtual mediante la implementación de scripts específicos del sistema operativo para: * Eliminar VMware Tools * Realizar copias de seguridad de la configuración IP para su reasignación según el plano seleccionado

+
+ Con esta nueva mejora, los usuarios ahora pueden anular las tareas predeterminadas de prepareVM, lo que permite ejecutar scripts personalizados para la preparación manual de máquinas virtuales, incluida la asignación de IP.  Esto proporciona un mayor control para entornos con requisitos de configuración o cumplimiento únicos.



. Nuevamente, en Detalles de la máquina virtual, seleccione la opción de configuración de IP relevante. Por defecto, está seleccionada la opción “No configurar”.
+
.. Para migrar máquinas virtuales con las mismas direcciones IP del sistema de origen, seleccione “Conservar IP”.
.. Para migrar máquinas virtuales que utilizan direcciones IP estáticas en el sistema de origen y asignar DHCP en las máquinas virtuales de destino, seleccione “DHCP”.
+
Asegúrese de que se cumplan los siguientes requisitos para que esta funcionalidad funcione:

+
*** Asegúrese de que las máquinas virtuales estén encendidas durante la fase de preparación de la máquina virtual y hasta el momento de migración programado.
*** Para las máquinas virtuales VMware, asegúrese de que VMware Tools esté instalado.
*** Para Hyper-V como hipervisor de origen, asegúrese de que los servicios de integración estén habilitados y configurados.
*** Para OLVM y OpenShift como hipervisor de destino, asegúrese de montar el archivo ISO de virtIO en las máquinas virtuales de Windows.
*** Asegúrese de que el script de preparación se ejecute en la máquina virtual de origen por una cuenta con privilegios de administrador en sistemas operativos Windows y con privilegios sudo sin opción de contraseña en sistemas operativos basados en Linux para crear trabajos cron.




. El siguiente paso es la configuración de la máquina virtual.
+
** Opcionalmente, puede cambiar el tamaño de los parámetros de CPU/RAM de las máquinas virtuales, lo que puede resultar muy útil para fines de cambio de tamaño.
** Anulación del orden de arranque: modifique también el orden de arranque y el retraso de arranque (segundos) para todas las máquinas virtuales seleccionadas en los grupos de recursos.  Esta es una opción adicional para modificar el orden de arranque si se requieren cambios respecto de lo seleccionado durante la selección del orden de arranque del grupo de recursos.  De forma predeterminada, se utiliza el orden de arranque seleccionado durante la selección del grupo de recursos, sin embargo, cualquier modificación se puede realizar en esta etapa.
** ENCENDIDO: desmarque esta opción si el flujo de trabajo no debe encender la máquina virtual.  La opción predeterminada es ON, lo que significa que la máquina virtual se encenderá.
** Eliminar herramientas de VMware: Shift Toolkit elimina las herramientas de VMware después de la conversión. Esta opción está seleccionada de forma predeterminada. Esta opción debe deseleccionarse si el plan es ejecutar scripts personalizados del propio cliente.
** Generación: el kit de herramientas Shift utiliza la siguiente regla general y tiene como valor predeterminado la adecuada: Gen1 > BIOS y Gen2 > EFI.  No es posible realizar ninguna selección para esta opción.
** Conservar MAC: se puede conservar la dirección MAC de las respectivas máquinas virtuales para superar los desafíos de licencia para aquellas aplicaciones que dependen de MAC.
** Anulación de cuenta de servicio: esta opción permite especificar una cuenta de servicio separada si no se puede utilizar la global.
+
image::shift-toolkit-075.png[Diálogo de la interfaz de usuario del grupo de recursos]



. Haz clic en “Continuar”.
. En el siguiente paso, programe la migración seleccionando la casilla de verificación para establecer la fecha y la hora. Asegúrese de que todas las máquinas virtuales (VM) estén preparadas y apagadas antes de la fecha programada. Una vez hecho esto, haz clic en “Crear plano”.
+
image::shift-toolkit-076.png[Diálogo de la interfaz de usuario del grupo de recursos]

+

NOTE: Al programar, elija una fecha que sea al menos 30 minutos mayor que la hora actual de Shift VM. Esto es para garantizar que el flujo de trabajo tenga tiempo suficiente para preparar las máquinas virtuales dentro del grupo de recursos.

. Una vez creado el plan, se inicia un trabajo de preparación de VM y este ejecuta automáticamente scripts en las máquinas virtuales de origen para prepararlas para la migración.
+
image::shift-toolkit-077.png[Diálogo de la interfaz de usuario del grupo de recursos]

+
Este trabajo ejecuta un script utilizando el método invocar-VMScript para copiar los scripts necesarios para eliminar las herramientas de VMware y realizar una copia de seguridad de los detalles de configuración de la red, incluida la dirección IP, las rutas y la información de DNS, que se utilizarán para mantener la misma configuración en la máquina virtual de destino.

+
.. Para los sistemas operativos basados ​​en Windows, la ubicación predeterminada donde se almacenan los scripts de preparación es la carpeta “C:\ NetApp”.
+
image::shift-toolkit-078.png[Diálogo de la interfaz de usuario del grupo de recursos]

.. Para las máquinas virtuales basadas en Linux, la ubicación predeterminada donde se almacenan los scripts de preparación es / NetApp y el directorio /opt.
+
image::shift-toolkit-079.png[Diálogo de la interfaz de usuario del grupo de recursos]

+

NOTE: Para una máquina virtual de origen Linux que ejecuta CentOS o Red Hat, el kit de herramientas Shift es inteligente para instalar automáticamente los controladores de Hyper-V necesarios. Estos controladores deben estar presentes en la VM de origen antes de la conversión del disco para garantizar que la VM pueda iniciarse correctamente después de la conversión.

+

NOTE: Para obtener información detallada, consultelink:https://access.redhat.com/solutions/3465011["El sistema se queda atascado en Dracut después de migrar una máquina virtual RHEL a Hyper-V."] .

+
Una vez que el trabajo de preparación de VM se complete con éxito (como se muestra en la captura de pantalla a continuación), las VM estarán listas para la migración y el estado del plan se actualizará a "Activo".

+
image::shift-toolkit-080.png[Diálogo de la interfaz de usuario del grupo de recursos]

+
image::shift-toolkit-081.png[Diálogo de la interfaz de usuario del grupo de recursos]

+
La migración ahora se realizará a la hora establecida o se puede iniciar manualmente haciendo clic en la opción Migrar.




