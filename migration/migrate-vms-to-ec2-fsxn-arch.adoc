---
sidebar: sidebar 
permalink: migration/migrate-vms-to-ec2-fsxn-arch.html 
keywords: netapp, vmware, amazon, ec2, fsxn, migration, iscsi, 
summary: 'Este informe técnico cubre cómo migrar máquinas virtuales VMware vSphere locales a una instancia de Amazon EC2 con discos de datos ubicados en LUN iSCSI de FSx ONTAP utilizando la funcionalidad de "movilidad de datos como código" de MigrateOps de Cirrus Migrate Cloud (CMC).' 
---
= Arquitectura y requisitos para migrar máquinas virtuales a Amazon EC2
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Obtenga información sobre la arquitectura y los requisitos previos clave para migrar máquinas virtuales a Amazon EC2 mediante Amazon FSx for NetApp ONTAP.



== Arquitectura de alto nivel

El siguiente diagrama ilustra la arquitectura de alto nivel de la migración de datos de disco de máquina virtual (VMDK) de VMware a AWS mediante CMC MigrateOps:

image:migrate-ec2-fsxn-001.png["Diagrama de arquitectura de migración de máquinas virtuales a Amazon EC2 mediante FSx ONTAP"]



== Cómo migrar sus máquinas virtuales VMware a AWS mediante Amazon EC2 y FSx ONTAP iSCSI



=== Prerrequisitos

Antes de comenzar los pasos del tutorial, asegúrese de que se cumplan los siguientes requisitos previos:

*En AWS*

* Una cuenta de AWS.  Esto incluye permisos para subredes, configuración de VPC, tablas de enrutamiento, migración de reglas de seguridad, grupos de seguridad y otros requisitos para la red, como el equilibrio de carga.  Como en cualquier migración, el mayor esfuerzo y consideración debe destinarse a la creación de redes.
* Funciones de IAM adecuadas que le permiten aprovisionar instancias de FSx ONTAP y Amazon EC2.
* Se permite que las tablas de rutas y los grupos de seguridad se comuniquen con FSx ONTAP.
* Agregue una regla de entrada al grupo de seguridad apropiado (consulte a continuación para obtener más detalles) para permitir la transferencia segura de datos desde su centro de datos local a AWS.
* Un DNS válido que pueda resolver nombres de dominios públicos de Internet.
* Verifique que su resolución DNS sea funcional y le permita resolver nombres de host.
* Para lograr un rendimiento óptimo y redimensionar, utilice los datos de rendimiento de su entorno de origen para redimensionar su almacenamiento de FSx ONTAP .
* Cada sesión de MigrateOps utiliza un EIP, por lo tanto, se debe aumentar la cuota de EIP para lograr mayor paralelismo.  Tenga en cuenta que la cuota EIP predeterminada es 5.
* (Si se están migrando cargas de trabajo basadas en Active Directory) Un dominio de Windows Active Directory en Amazon EC2.


*Para Cirrus Migrate Cloud*

* Una cuenta de Cirrus Data Cloud enlink:http://cloud.cirrusdata.com/["nube.cirrusdata.com"] Debe crearse antes de usar CMC.  Se debe permitir la comunicación saliente con la CDN, los puntos finales de Cirrus Data y el repositorio de software a través de HTTPS.
* Permitir la comunicación (saliente) con los servicios de Cirrus Data Cloud a través del protocolo HTTPS (Puerto 443).
* Para que un host sea administrado por el proyecto CMC, el software CMC implementado debe iniciar una conexión TCP saliente unidireccional a Cirrus Data Cloud.
* Permitir el acceso al protocolo TCP, puerto 443, a portal-gateway.cloud.cirrusdata.com, que actualmente se encuentra en 208.67.222.222.
* Permitir solicitudes HTTP POST (a través de conexión HTTPS) con carga de datos binarios (aplicación/octet-stream).  Esto es similar a cargar un archivo.
* Asegúrese de que su DNS (o a través del archivo de host del sistema operativo) pueda resolver portal-gateway.cloud.cirrusdata.com.
* Si tiene reglas estrictas para prohibir que las instancias de producto realicen conexiones salientes, se puede usar la función "Retransmisión de administración" de CMC cuando la conexión 443 saliente proviene de un único host seguro que no es de producción.


*Nota*: Nunca se envían datos de almacenamiento al punto final de Cirrus Data Cloud.  Solo se envían metadatos de administración, que se pueden enmascarar opcionalmente para que no se incluyan el nombre de host real, el nombre del volumen ni la IP de la red.

Para migrar datos de repositorios de almacenamiento locales a AWS, MigrateOps automatiza la administración de una conexión de host a host (H2H).  Se trata de conexiones de red optimizadas, unidireccionales y basadas en TCP que CMC utiliza para facilitar la migración remota.  Este proceso incluye compresión y cifrado siempre activos que pueden reducir la cantidad de tráfico hasta ocho veces, dependiendo de la naturaleza de los datos.

*Nota*: CMC está diseñado para que ningún dato de producción/E/S salga de la red de producción durante toda la fase de migración.  Como resultado, se requiere conectividad directa entre el host de origen y el de destino.
