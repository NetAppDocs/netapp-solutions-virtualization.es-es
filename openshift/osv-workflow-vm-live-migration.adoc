---
sidebar: sidebar 
permalink: openshift/osv-workflow-vm-live-migration.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift, OpenShift Virtualization, CNV, Container Native Virtualization, Red Hat OpenShift Virtualization 
summary: Virtualización de Red Hat OpenShift con NetApp ONTAP 
---
= Migrar una máquina virtual entre dos nodos en un clúster de Red Hat OpenShift
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Migre una VM en OpenShift Virtualization entre dos nodos en el clúster sin tiempo de inactividad.  Este procedimiento incluye confirmar que los discos utilizan clases de almacenamiento compatibles con RWX, iniciar la migración y supervisar el progreso.



== Migración en vivo de máquinas virtuales

La migración en vivo es un proceso de migración de una instancia de VM de un nodo a otro en un clúster OpenShift sin tiempo de inactividad.  Para que la migración en vivo funcione en un clúster OpenShift, las máquinas virtuales deben estar vinculadas a PVC con modo de acceso ReadWriteMany compartido.  Los backends Trident configurados mediante controladores ontap-nas admiten el modo de acceso RWX para los protocolos de sistema de archivos NFS y SMB.  Consulte la documentaciónlink:https://docs.netapp.com/us-en/trident/trident-use/ontap-nas.html["aquí"] .  Los backends Trident configurados mediante controladores ontap-san admiten el modo de acceso RWX para el modo de volumen de bloque para los protocolos iSCSI y NVMe/TCP.  Consulte la documentaciónlink:https://docs.netapp.com/us-en/trident/trident-use/ontap-san.html["aquí"] .

Por lo tanto, para que la migración en vivo tenga éxito, las máquinas virtuales deben estar provistas de discos (discos de arranque y discos hot plug adicionales) con PVC utilizando clases de almacenamiento ontap-nas o ontap-san (volumeMode: Block).  Cuando se crean las PVC, Trident crea volúmenes ONTAP en un SVM habilitado para NFS o iSCSI.

image:redhat-openshift-055.png["Arquitectura de migración en vivo de máquinas virtuales"]

Para realizar una migración en vivo de una máquina virtual que se ha creado previamente y se encuentra en estado de ejecución, realice los siguientes pasos:

. Seleccione la VM que desea migrar en vivo.
. Haga clic en la pestaña *Configuración*.
. Asegúrese de que todos los discos de la máquina virtual se creen utilizando clases de almacenamiento que admitan el modo de acceso RWX.
. Haga clic en *Acciones* en la esquina derecha y luego seleccione *Migrar*.
. Para ver el progreso de la migración, vaya a Virtualización > Descripción general en el menú del lado izquierdo y luego haga clic en la pestaña *Migraciones*.  La migración de la máquina virtual pasará de *Pendiente* a *Programando* a *Realizada*



NOTE: Una instancia de VM en un clúster de OpenShift migra automáticamente a otro nodo cuando el nodo original se coloca en modo de mantenimiento si evictionStrategy está configurado en LiveMigrate.

image:rh-os-n-use-case-vm-live-migrate-001.png["Inicio de VM Live Migrate"]

image:rh-os-n-use-case-vm-live-migrate-002.png["Migración en vivo de VM exitosa"]
